"0","#this is an example of a data scrape request. This is specifically one company and one state over a period of time. My project specifically focused on Arms contractors in MD, but to adapt this to hospitals all I would need to do is change the pasted url."
"0","generaldynamicsMD <- foreach(i = 1994:2022, .combine = 'rbind') %dopar% {"
"0","  library(rvest)"
"0","  library(dplyr)"
"0","  readUrl <- function(url) {"
"0","    out <- tryCatch("
"0","        {"
"0","            read_html(paste(url, sep="""")) %>% html_element(xpath='//*[(@id = ""csvLink"")]') %>% html_attr(""href"")"
"0","        },"
"0","        error=function(cond) {"
"0","            return(NA)"
"0","        },"
"0","        warning=function(cond) {"
"0","            return(NA)"
"0","        },"
"0","        finally={"
"0","        }"
"0","    )    "
"0","    return(out)"
"0","}"
"0","  y=readUrl(paste('https://www.fpds.gov/ezsearch/fpdsportal?indexName=awardfull&templateName=1.5.3&s=FPDS.GOV%252525252525252525252525252525252BtemplateName1.5.2%252525252525252525252525252525252BindexNameawardfull&q=ULTIMATE_UEI_NAME%3A%22GENERAL+DYNAMICS%22+CONTRACT_FISCAL_YEAR%3A%22',as.character(i),'%22+VENDOR_ADDRESS_STATE_CODE%3A%22MD%22&x=24&y=13',sep=""""))"
"0","  if (is.na(y)==FALSE) { year_x <- read.csv(paste(""https://www.fpds.gov/ezsearch/fpdsportal"",y, sep=""""))"
"0","  year_name <- paste(""year"",i, sep = """")"
"0","  assign(year_name,year_x) }"
"0","}"
